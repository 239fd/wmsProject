# Программное средство автоматизации складской логистики на основе технологии RPA.

## Краткое описание проекта.
Разрабатываемое программное средство представляет собой микросервисную систему управления складской логистикой, в которой ключевые бизнес-процессы предметной области автоматизируются с использованием технологии Robotic Process Automation (RPA). Система обеспечивает интеграцию функциональных модулей учёта товаров, управления складскими ячейками и стеллажами, оформления и хранения документов, а также взаимодействия с организациями и пользователями. В архитектуре применены принципы Clean Architecture, предметно-ориентированного проектирования (DDD), а также паттерны CQRS, Saga и другие, что позволяет достичь модульности, гибкости и масштабируемости решения.
## Цели проекта. 
Основной целью проекта является повышение эффективности управления складской логистикой за счёт автоматизации рутинных операций и документооборота.
## Основные возможности проекта.
- Управление товарами и отслеживание их статусов в системе  
- Ведение учёта складской инфраструктуры (склады, стеллажи, ячейки) и распределение товаров по местам хранения  
- Автоматизированное формирование актов переоценки, инвентаризационных списков и прочей документации на основе технологии RPA  
- Управление информацией об организациях 
- Поддержка ролевой модели доступа пользователей и интеграция с внешними системами аутентификации  
- Мониторинг и трассировка бизнес-операций с целью повышения надёжности и управляемости системы  

Ссылка на репозиторий сервера: https://github.com/239fd/wmsProject.
Ссылка на репозиторий клиента: https://github.com/239fd/wmsProjectClient.

---

## **Содержание**

1. [Архитектура](#Архитектура)
	1. [C4-модель](#C4-модель)
	2. [Схема данных](#Схема_данных)
2. [Функциональные возможности](#Функциональные_возможности)
	1. [Диаграмма вариантов использования](#Диаграмма_вариантов_использования)
	2. [User-flow диаграммы](#User-flow_диаграммы)
3. [Детали реализации](#Детали_реализации)
	1. [UML-диаграммы](#UML-диаграммы)
	2. [Спецификация API](#Спецификация_API)
	3. [Безопасность](#Безопасность)
	4. [Оценка качества кода](#Оценка_качества_кода)
4. [Тестирование](#Тестирование)
	1. [Unit-тесты](#Unit-тесты)
	2. [Интеграционные тесты](#Интеграционные_тесты)
5. [Установка и  запуск](#installation)
	1. [Манифесты для сборки docker образов](#Манифесты_для_сборки_docker_образов)
	2. [Манифесты для развертывания k8s кластера](#Манифесты_для_развертывания_k8s_кластера)
6. [Лицензия](#Лицензия)
7. [Контакты](#Контакты)

---
## **Архитектура**

### C4-модель

- [c4-container-level.pdf](./c4-container-level.pdf)
  Диаграмма уровня контейнеров (C4). Отражает основные программные контейнеры системы: веб-интерфейс (SPA на React), API Gateway, микросервисы (WarehouseService, ProductService, DocumentsService, OrganizationService, SSOService), базы данных (PostgreSQL для пользователей, склада, товаров и организаций), а также интеграцию с брокером сообщений RabbitMQ, Redis и системой мониторинга (Jaeger, Prometheus/Grafana). Показывает распределение обязанностей между сервисами и взаимодействие пользователей (складской работник, бухгалтер, директор) с системой.
  <img width="1826" height="1356" alt="с4 2 drawio" src="https://github.com/user-attachments/assets/7f439b38-0552-49b9-9f05-aa9ab91d4560" />

- [c4-component-level.pdf](./c4-component-level.pdf)  
  Диаграмма уровня компонентов (C4). Детализирует внутреннее устройство каждого контейнера на уровене компонентов: контроллеры (например, `AccountController`, `ProductController`, `DocumentsController`), сервисы (например, `AccountService`, `WarehouseService`, `OrganizationService`), модели домена (`User`, `Product`, `Organization`, `Warehouse`, `Document`) и репозитории для работы с БД.  Включает также инфраструктурные компоненты — `EventPublisher`, `EventsListener`, `TracingAdapter`, конфигурацию безопасности и интеграцию с Redis.
	<img width="4385" height="2055" alt="с4 3 drawio" src="https://github.com/user-attachments/assets/cd41f187-49c5-45e7-a0bc-c1e6e60eed08" />

- [c4-code-level.pdf](./c4-code-level.pdf)  
  Диаграмма уровня кода (C4). Представляет детализированную структуру реализации на уровне классов и интерфейсов. Включает контроллеры (`AccountController`, `UserInfoController`, `OAuthClientController` и др.), реализации сервисов (`AccountServiceImpl`, `ProductServiceImpl`, `DocumentServiceImpl`, `OrganizationServiceImpl`, `WarehouseServiceImpl`), доменные сущности (`User`, `Product`, `Document`, `Organization`, `Warehouse`, `Rack`, `Cell`), а также вспомогательные классы (`RPAExecutor`, перечисления `Role`, `Status`, `Type`).
  <img width="3095" height="1315" alt="с4 4 drawio" src="https://github.com/user-attachments/assets/e75212e9-83ac-4b7c-934d-2e6e3c15bd04" />


Архитектура проектируемого программного средства реализована с опорой на принципы Clean Architecture и учитывает положения предметно-ориентированного проектирования (DDD), а также паттерны CQRS, Saga и Database-per-Service. Основной замысел заключается в разделении системы на изолированные микросервисы, каждый из которых отвечает за свой ограниченный контекст и взаимодействует с другими исключительно посредством обмена событиями.
Внутренняя структура сервисов унифицирована и соответствует слоям Clean Architecture. На уровне домена (Entities) определяются сущности, обеспечивающие строгую модель предметной области. Так, в сервисе учётных записей ключевым элементом является пользователь, связанный с набором ролей и прав доступа; в сервисе продуктов доменную основу составляют товар и его жизненный цикл, отражённый в статусах; в сервисе документов реализованы сущности акта переоценки, инвентаризационного списка и прочие документы, а также RPA для автоматизированного формирования документов; в сервисе организаций центральным элементом выступает организация как субъект; в сервисе склада определены склад, стеллажи и ячейки, формирующие основу складской модели.
Над доменной моделью располагается уровень прикладных сценариев (Use Cases), реализующий обработку команд и запросов. Здесь проявляется паттерн CQRS: команды изменяют состояние агрегатов и инициируют публикацию доменных событий, тогда как запросы обеспечивают доступ к материализованным представлениям данных. Например, в сервисе документов команда запускает генерацию акта переоценки, а запрос позволяет получить готовый документ; в сервисе склада команды формируют структуру склада, а запросы возвращают сведения о стеллажах и ячейках.
Интеграция с внешним миром и взаимодействие сервисов организованы через уровень адаптеров. Контроллеры обеспечивают доступ к сервисам, репозитории инкапсулируют операции с данными, а специальные инфраструктурные компоненты отвечают за публикацию и приём событий, а также за трассировку и мониторинг. Все реализации инфраструктуры изолированы в отдельном слое, что также соответствует требованию Clean Architecture.
Большинство сервисов обладает собственной базой данных в соответствии с принципом Database-per-Service. Это исключает межсервисные зависимости на уровне хранилищ и позволяет масштабировать систему фрагментарно, сохраняя согласованность данных посредством обмена событиями. Для координации долгоживущих бизнес-процессов применяется паттерн Saga. Например, при оформлении отгрузки инициируются события, которые затрагивают сервис товара, сервис склада, сервис документов и сервис организаций. Последовательность действий управляется сагой, что обеспечивает как прямое выполнение транзакции, так и компенсацию при возникновении ошибок. 

### Схема данных

- База данных сервиса аутентификации
  <img width="977" height="492" alt="изображение" src="https://github.com/user-attachments/assets/c062c928-fe9b-4281-ad00-721cd8bae3d1" />
- База данных сервиса организаций
  <img width="869" height="394" alt="изображение" src="https://github.com/user-attachments/assets/b245f234-487b-47b6-a0ff-128e1213d124" />
- База данных сервиса склада
  <img width="977" height="1093" alt="изображение" src="https://github.com/user-attachments/assets/3d845f03-b96e-41c6-8d1c-8a48b89eae6c" />
- База данных сервиса управления товарами и запасами
  <img width="663" height="1353" alt="изображение" src="https://github.com/user-attachments/assets/426a5d21-b3dc-4878-bcd5-c43c5eb10c33" />

---

## **Функциональные возможности**

### Диаграмма вариантов использования

Диаграмма вариантов использования и ее описание

### User-flow диаграммы

В данном подразделе представлены user-flow диаграммы для всех ролей пользователей программного средства.

- [user-flow работника](./User-flow%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BD%D0%B8%D0%BA.pdf)
<img width="1399" height="1238" alt="{379DDE94-0600-43CC-ABE3-200FC022AC78}" src="https://github.com/user-attachments/assets/d7418ed5-dbaa-41e2-89bc-aefb6f4bf813" />
Диаграмма иллюстрирует последовательный путь взаимодействия пользователя с ролью «Работник склада» в рамках программного средства автоматизации складской логистики.
Схема охватывает основные этапы деятельности сотрудника – от входа в систему до выполнения операций по приёмке и отгрузке товаров, а также управление персональными настройками и завершение работы.
Взаимодействие начинается с главной страницы приложения, где пользователь проходит авторизацию или регистрацию. После успешного входа система перенаправляет его на домашнюю страницу, служащую отправной точкой для навигации по функциональным разделам. В случае ошибок отображается уведомление, обеспечивающее корректность ввода и безопасность доступа.
После аутентификации пользователю становится доступен личный раздел для просмотра и редактирования профиля, а также управления активными сессиями. Эти функции поддерживают актуальность данных и прозрачность действий внутри системы.
Основное внимание уделено операциям приёмки и отгрузки. Приёмка осуществляется на специализированной странице, где работник добавляет товарные позиции, проверяет корректность данных и размещение на складе. Завершающим этапом является генерация документов, включая приходной ордер. 
Процесс отгрузки представлен двумя сценариями: создание новой заявки с резервированием товаров и генерацией листа подбора либо оформление уже собранного заказа с формированием сопроводительных документов. По завершении система уведомляет о результате операции и предоставляет возможность перейти к следующей задаче. 
Диаграмма отражает целостную логику работы сотрудника склада, объединяя приёмку, отгрузку и администрирование профиля в единую структуру, обеспечивающую интуитивную навигацию и согласованность действий.

- [user-flow директора](./User-flow%20%D0%B4%D0%B8%D1%80%D0%B5%D0%BA%D1%82%D0%BE%D1%80.pdf)
<img width="1670" height="1228" alt="{AF1E6925-B20C-4AE4-9B16-92C2DDFFBFDE}" src="https://github.com/user-attachments/assets/7c3e44bc-c488-4c13-8999-7a837e011f36" />
Данная диаграмма отображает последовательность взаимодействия пользователя с ролью «Директор» с программным средством автоматизации складской логистики.
Основное назначение сценария – контроль, анализ и управление структурой предприятия, а также работа с аналитическими данными.
После авторизации пользователь попадает на домашнюю страницу, с которой осуществляется переход к основным разделам системы. В случае ошибки система уведомляет о некорректных данных, предотвращая несанкционированный доступ.
Директор имеет возможность управлять профилем и активными сессиями, редактировать персональные данные и контролировать доступ.
Ключевой функциональный блок связан с управлением организацией: в соответствующем разделе можно просматривать, изменять и добавлять сведения об организации, складах и сотрудниках, а также удалять устаревшие записи. Все изменения фиксируются системой и сопровождаются подтверждающими уведомлениями.
Отдельный раздел предназначен для анализа деятельности предприятия. Здесь представлены показатели состояния запасов, структуры товарных остатков и загруженности складов. Система позволяет формировать отчёты и экспортировать их для дальнейшего анализа.
Диаграмма демонстрирует целостный сценарий работы руководителя, объединяя административные, аналитические и контрольные функции, что способствует эффективному управлению организацией и повышает прозрачность бизнес-процессов.

- [user-flow бухгалтера](./User-flow%20%D0%B1%D1%83%D1%85%D0%B3%D0%B0%D0%BB%D1%82%D0%B5%D1%80.pdf)
<img width="1309" height="1230" alt="{BAE2CFE5-7A88-4F1E-BD24-516D966966C3}" src="https://github.com/user-attachments/assets/8d0172ae-afbc-46b6-aa34-a9feafbdae69" />
Диаграмма отражает взаимодействие пользователя с ролью «Бухгалтер» в процессе автоматизации учётных и складских операций.
Она охватывает все ключевые этапы – от авторизации до выполнения бухгалтерских функций: инвентаризации, списания и переоценки товаров.
После входа в систему пользователь получает доступ к личному разделу, где может изменять профиль и управлять активными сессиями. Далее бухгалтер переходит к основным операциям учёта.
Процесс инвентаризации начинается с формирования списка проверяемых товаров и фиксации фактического наличия. Система анализирует результаты, выявляет расхождения и формирует отчётные документы для корректировки данных учёта.
При обнаружении недостач или порчи товаров пользователь инициирует процесс списания. В нём указываются склад, позиции, причины и основания для удаления товаров из учёта. После подтверждения система формирует акт списания и уведомляет о завершении операции.
Для актуализации стоимости товаров предусмотрена процедура переоценки. Бухгалтер выбирает основания изменения цены, вводит данные по товарам, после чего система автоматически пересчитывает показатели и создаёт соответствующий документ.
Диаграмма демонстрирует комплексный подход к автоматизации учётных операций. Она объединяет в единую структуру процессы инвентаризации, списания и переоценки, обеспечивая последовательность действий, прозрачность данных и снижение объёма ручной работы.




---

## **Детали реализации**

### UML-диаграммы

Представить все UML-диаграммы , которые позволят более точно понять структуру и детали реализации ПС

### Спецификация API

Представить описание реализованных функциональных возможностей ПС с использованием Open API (можно представить либо полный файл спецификации, либо ссылку на него)

### Безопасность

Описать подходы, использованные для обеспечения безопасности, включая описание процессов аутентификации и авторизации с примерами кода из репозитория сервера

### Оценка качества кода

Используя показатели качества и метрики кода, оценить его качество

---

## **Тестирование**

### Unit-тесты

Представить код тестов для пяти методов и его пояснение

### Интеграционные тесты

Представить код тестов и его пояснение

---

## **Установка и  запуск**

### Манифесты для сборки docker образов

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

### Манифесты для развертывания k8s кластера

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

---

## **Лицензия**

Этот проект лицензирован по лицензии MIT - подробности представлены в файле [[License.md|LICENSE.md]]

---

## **Контакты**

Автор: pavelkarliuk1@gmail.com

